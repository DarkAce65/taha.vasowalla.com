<!DOCTYPE html>
<html>
	<head>
		<title>Experimental</title>
		<link rel="shortcut icon" href="img/icons/TV.png"/>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="bower_components/font-awesome/css/font-awesome.min.css"/>
		<script src="bower_components/jquery/dist/jquery.min.js"></script>
		<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="bower_components/three.js/build/three.min.js"></script>
		<script src="lib/GSAP/TweenMax.min.js"></script>
		<script src="lib/THREE.Controls/TrackballControls.js"></script>
		<style type="text/css">
			html, body {
				width: 100%;
				height: 100%;
				margin: 0;
				padding: 0;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<div id="rendererContainer"></div>
		<script type="text/javascript">
			window.requestAnimFrame =
				window.requestAnimationFrame ||
				window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame ||
				window.oRequestAnimationFrame ||
				window.msRequestAnimationFrame ||
				function(callback) {
					window.setTimeout(callback, 1000 / 60);
				};

			var factor = window.innerWidth < 768 ? 1.5 : 1;

			var clock = new THREE.Clock();
			var scene = new THREE.Scene();
			var renderer = new THREE.WebGLRenderer({alpha: true, antialias: true});
			$("#rendererContainer").append(renderer.domElement);
			renderer.setSize(window.innerWidth, window.innerHeight);
			renderer.setClearColor(0x131d29);
			renderer.setPixelRatio(window.devicePixelRatio);

			var camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 10000);
			camera.position.set(-75, -255, 135);
			scene.add(camera);
			var controls = new THREE.TrackballControls(camera, renderer.domElement);
			camera.lookAt(scene.position);

			var lights = [];

			lights[0] = new THREE.PointLight(0xeeeefe, 3, 150, 1.5);
			lights[0].position.set(45, 15, 105);

			lights[1] = new THREE.PointLight(0x423e6a, 1, 1200, 2);
			lights[1].position.set(-90, 10, 120);

			lights[2] = new THREE.PointLight(0x513c1f, 1, 300, 3);
			lights[2].position.set(40, -40, 80);

			for(var i = 0; i < lights.length; i++) {
				scene.add(lights[i]);
			}

			var planetMaterial = new THREE.MeshPhongMaterial({
				morphTargets: true,
				shininess: 30,
				color: 0x526464,
				side: THREE.DoubleSide,
				shading: THREE.FlatShading
			});
			var planetGeometry = new THREE.IcosahedronGeometry(60, 3);
			for(var i = 0; i < planetGeometry.vertices.length; i++) {
				planetGeometry.vertices[i].x += Math.random() * 6 - 3;
				planetGeometry.vertices[i].y += Math.random() * 6 - 3;
				planetGeometry.vertices[i].setLength(59 + Math.random() * 2);
			}
			var planet = new THREE.Mesh(planetGeometry, planetMaterial);
			scene.add(planet);

			function render() {
				requestAnimFrame(render);
				renderer.render(scene, camera);
				controls.update();

				var delta = clock.getDelta();
				planet.rotation.z += delta / 5;
			}

			render();

			$(window).resize(function() {
				renderer.setSize(window.innerWidth, window.innerHeight);
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				factor = window.innerWidth < 768 ? 1.5 : 1;
			});

			$(window).load(function() {
				renderer.setSize(window.innerWidth, window.innerHeight);
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
			});
		</script>
	</body>
</html>