@import '../partials/colors';

$rt2: 1.41421356237;
$rt5: 2.2360679775;

$timeline-gap: 20px;
$timeline-width: 2px;
$timeline-event-size: 6px;
$timeline-width-and-gap: $timeline-gap + $timeline-width;

.empty {
  position: relative;
  height: 100%;
  padding-left: $timeline-gap;
  border-left: $timeline-width solid transparent;
}

.connector {
  @extend .empty;
  border-color: $red;
}

.event {
  @extend .connector;

  &::after {
    content: '';
    position: absolute;
    top: 0.5em;
    left: -$timeline-width / 2 - $timeline-event-size / 2;
    background: $white;
    width: $timeline-event-size * 2;
    height: $timeline-event-size / 2;
  }
}

.branch {
  position: relative;
  height: $timeline-width-and-gap;
  margin-left: -$timeline-width-and-gap;
  padding-left: $timeline-width-and-gap;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    background: $red;
    width: max(1px, ceil($timeline-width / 1.5));
    height: $timeline-width-and-gap * $rt2 + $timeline-width/2;
  }

  &.split::before {
    bottom: 0;
    transform: rotate(45deg);
    transform-origin: bottom;
  }

  &.join::before {
    top: 0;
    transform: rotate(-45deg);
    transform-origin: top;
  }

  &.deep {
    &::before {
      height: $timeline-width-and-gap * $rt5 + $timeline-width/2;
    }

    &.split::before {
      transform: rotate(63.435deg);
    }

    &.join::before {
      transform: rotate(-63.435deg);
    }
  }
}
